```mdx
---
title: "Project Analysis & Product Management API"
version: "v1.0"
date: "2024-07-29"
framework: "nestjs"
---

# Project Analysis & Product Management API

<Info>
  This document provides comprehensive API documentation for interacting with the Project Analysis and Product Management services. It covers endpoints for initiating and retrieving project analysis results, as well as full CRUD operations for product resources.
</Info>

This API enables programmatic access to project insights and product data, facilitating integration with other systems and automation of workflows. All endpoints are designed to be RESTful and follow standard HTTP conventions.

## Framework Information

This API is built using **NestJS**, a progressive Node.js framework for building efficient, reliable, and scalable server-side applications. NestJS leverages TypeScript and combines elements of OOP, Functional Programming, and Reactive Programming.

### Key NestJS Patterns and Conventions:

*   **Controllers:** Handle incoming requests and return responses. They are decorated with `@Controller()` and define route handlers using decorators like `@Get()`, `@Post()`, `@Patch()`, `@Delete()`.
*   **Services:** Encapsulate business logic and are responsible for data interaction and processing. They are typically injected into controllers using NestJS's dependency injection system.
*   **Data Transfer Objects (DTOs):** Plain TypeScript classes that define the shape of data being sent over the network (request bodies, query parameters). They are often validated using libraries like `class-validator` and `class-transformer`.
*   **Decorators:** Used extensively in NestJS to define metadata, such as `@Body()`, `@Param()`, `@Query()` to extract data from the request, and `@UseGuards()`, `@UseInterceptors()` for applying cross-cutting concerns.

### Framework-Specific Features:

*   **Middleware:** While traditional Express middleware can be used, NestJS often prefers Guards, Interceptors, and Pipes for request lifecycle management, offering more granular control and better integration with the framework's dependency injection.
*   **Dependency Injection:** Services and other providers are automatically instantiated and injected where needed, promoting modularity and testability.

## Authentication

All protected endpoints require authentication using a **Bearer Token**. This token must be included in the `Authorization` header of every request.

<Auth type="Bearer" />

### Required Headers

| Header          | Type     | Description                                     | Example Value           |
| :-------------- | :------- | :---------------------------------------------- | :---------------------- |
| `Authorization` | `string` | **Required**. Bearer token for authentication.  | `Bearer your_jwt_token` |
| `Content-Type`  | `string` | **Required** for requests with a body.          | `application/json`      |

<Note>
  Ensure your token is kept secure and is refreshed before expiration if applicable.
</Note>

## Endpoint Definitions

This API provides two main sets of functionalities: Project Analysis and Product Management.

### Product Management Endpoints

The `ProductsController` handles all operations related to product resources.

#### Product Data Model (`Product`)

The `Product` interface defines the structure of a product object in the system.

```typescript
interface Product {
  id: string;
  name: string;
  description?: string;
  price: number;
  category: string;
  createdAt: Date;
  updatedAt: Date;
  deepNestedData: {
    level2: {
      level3: {
        level4: {
          level5: {
            value: string;
            timestamp: Date;
            metadata: {
              source: string;
              version: string;
            };
          };
        };
      };
    };
  };
}
```

---

### 1. Create a New Product

Creates a new product entry in the database.

`POST /products`

#### Request

**Headers**

| Header         | Type     | Description                                        | Example Value           |
| :------------- | :------- | :------------------------------------------------- | :---------------------- |
| `Authorization`| `string` | **Required**. Bearer token for authentication.     | `Bearer your_jwt_token` |
| `Content-Type` | `string` | **Required**. Must be `application/json`.          | `application/json`      |

**Request Body (`CreateProductDto`)**

| Field       | Type     | Description                                         | Required | Example      |
| :---------- | :------- | :-------------------------------------------------- | :------- | :----------- |
| `name`      | `string` | The name of the product.                            | Yes      | `"Laptop Pro"` |
| `description` | `string` | A brief description of the product.                 | No       | `"Powerful and lightweight."` |
| `price`     | `number` | The price of the product.                           | Yes      | `1200.99`      |
| `category`  | `string` | The category the product belongs to.                | Yes      | `"Electronics"` |
| `deepNestedData` | `object` | Complex nested data structure associated with the product. | No | See example below |

**Example Request Body**

```json
{
  "name": "Wireless Mouse X1",
  "description": "Ergonomic wireless mouse with long battery life.",
  "price": 49.99,
  "category": "Peripherals",
  "deepNestedData": {
    "level2": {
      "level3": {
        "level4": {
          "level5": {
            "value": "initial_data",
            "timestamp": "2024-07-29T10:00:00Z",
            "metadata": {
              "source": "api_creation",
              "version": "1.0"
            }
          }
        }
      }
    }
  }
}
```

#### Response

**Status Codes**

*   `201 Created`: The product was successfully created.
*   `400 Bad Request`: Invalid request payload.
*   `401 Unauthorized`: Authentication token is missing or invalid.
*   `403 Forbidden`: User does not have permission to create products.
*   `500 Internal Server Error`: An unexpected error occurred on the server.

**Example Success Response (201 Created)**

<ResponseExample status="201">

```json
{
  "id": "a1b2c3d4-e5f6-7890-1234-567890abcdef",
  "name": "Wireless Mouse X1",
  "description": "Ergonomic wireless mouse with long battery life.",
  "price": 49.99,
  "category": "Peripherals",
  "createdAt": "2024-07-29T10:30:00.000Z",
  "updatedAt": "2024-07-29T10:30:00.000Z",
  "deepNestedData": {
    "level2": {
      "level3": {
        "level4": {
          "level5": {
            "value": "initial_data",
            "timestamp": "2024-07-29T10:00:00Z",
            "metadata": {
              "source": "api_creation",
              "version": "1.0"
            }
          }
        }
      }
    }
  }
}
```

</ResponseExample>

---

### 2. Retrieve All Products

Fetches a list of all available products.

`GET /products`

#### Request

**Headers**

| Header         | Type     | Description                                        | Example Value           |
| :------------- | :------- | :------------------------------------------------- | :---------------------- |
| `Authorization`| `string` | **Required**. Bearer token for authentication.     | `Bearer your_jwt_token` |

#### Response

**Status Codes**

*   `200 OK`: Successfully retrieved the list of products.
*   `401 Unauthorized`: Authentication token is missing or invalid.
*   `403 Forbidden`: User does not have permission to view products.
*   `500 Internal Server Error`: An unexpected error occurred on the server.