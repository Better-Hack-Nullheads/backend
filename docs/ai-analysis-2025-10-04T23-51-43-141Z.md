```mdx
---
title: "Project Analysis API Documentation"
version: "v1.0"
date: "2025-01-XX"
framework: "nestjs"
---

# Project Analysis API

<Info>
  This documentation details the API for project analysis, allowing users to
  trigger code analysis, retrieve results, and manage product entities.
</Info>

This API provides endpoints to interact with a backend service designed for project code analysis and product management. It leverages a modern TypeScript stack with the NestJS framework, offering a robust and scalable architecture.

## Framework Information

This API is built using **NestJS**, a progressive Node.js framework for building efficient, reliable, and scalable server-side applications.

**Key NestJS Patterns and Conventions:**

*   **Controllers**: Handle incoming requests and return responses. They are decorated with `@Controller()` and map HTTP methods to handler functions using decorators like `@Get()`, `@Post()`, `@Patch()`, `@Delete()`.
*   **Services**: Encapsulate business logic and are decorated with `@Injectable()`. Controllers inject services to perform operations.
*   **Modules**: Organize the application into cohesive blocks of functionality.
*   **Decorators**: Extensively used for metadata definition (e.g., `@Param()`, `@Body()`, `@Query()`).
*   **DTOs (Data Transfer Objects)**: Classes used to define the shape of request bodies and response payloads, often validated using `@nestjs/class-validator`.

**Framework-Specific Features/Middleware:**

*   **Dependency Injection**: Central to NestJS, allowing for easy management of components and their dependencies.
*   **Pipes**: Used for data transformation and validation (e.g., `ValidationPipe`, `ParseUUIDPipe`).
*   **Guards**: Protect routes based on authentication or authorization logic.
*   **Interceptors**: Allow for cross-cutting concerns like logging, caching, or transforming responses.

<Note>
  The analysis indicates standard NestJS patterns. For more advanced features like
  GraphQL, WebSockets, or Microservices, refer to the NestJS official
  documentation.
</Note>

## Authentication

This API uses **Bearer Token** authentication. A valid JWT (JSON Web Token) must be included in the `Authorization` header for all protected endpoints.

<Auth type="Bearer" />

### Required Headers

| Header          | Type     | Description                                     |
| :-------------- | :------- | :---------------------------------------------- |
| `Authorization` | `string` | **Required**. Bearer token, e.g., `Bearer YOUR_JWT_TOKEN`. |
| `Content-Type`  | `string` | **Required** for requests with a body. Should be `application/json`. |

<Warning>
  Ensure your JWT is securely stored and transmitted. Avoid hardcoding tokens
  in production environments.
</Warning>

## API Endpoints

This API exposes endpoints for managing `Product` entities and performing project analysis.

### Product Management

The `/products` resource allows for full CRUD (Create, Read, Update, Delete) operations on product items.

---

### Get a Product by ID

Retrieves a single product's details using its unique identifier.

`GET /products/:id`

#### Request

This endpoint requires a product ID as a path parameter.

##### Path Parameters

| Name | Type     | Description             | Required |
| :--- | :------- | :---------------------- | :------- |
| `id` | `string` | The unique ID of the product to retrieve. | Yes |

##### Example Request

```bash
curl -X GET \
  http://localhost:3000/products/65d1d6e1c8a1b7001f3e7a8b \
  -H 'Accept: application/json' \
  -H 'Authorization: Bearer YOUR_JWT_TOKEN'
```

#### Response

##### Success Response (`200 OK`)

```json
{
  "id": "65d1d6e1c8a1b7001f3e7a8b",
  "name": "Wireless Ergonomic Mouse",
  "description": "An ergonomic mouse designed for comfort and precision.",
  "price": 49.99,
  "category": "Electronics",
  "createdAt": "2024-02-18T10:30:00.000Z",
  "updatedAt": "2024-02-18T10:30:00.000Z",
  "deepNestedData": {
    "level2": {
      "level3": {
        "level4": {
          "level5": {
            "value": "sample_value",
            "timestamp": "2024-02-18T10:30:00.000Z",
            "metadata": {
              "source": "internal",
              "version": "1.0"
            }
          }
        }
      }
    }
  }
}
```

##### Error Responses

<ErrorExample status="404">
```json
{
  "statusCode": 404,
  "message": "Product with ID '65d1d6e1c8a1b7001f3e7a8c' not found",
  "error": "Not Found"
}
```
</ErrorExample>

<ErrorExample status="401">
```json
{
  "statusCode": 401,
  "message": "Unauthorized",
  "error": "Unauthorized"
}
```
</ErrorExample>

---

### Create a New Product

Adds a new product to the system.

`POST /products`

#### Request

##### Request Body (`application/json`)

The request body should conform to the `CreateProductDto` schema.

| Name         | Type     | Description                                 | Required |
| :----------- | :------- | :------------------------------------------ | :------- |
| `name`       | `string` | The name of the product.                    | Yes      |
| `description`| `string` | A brief description of the product.         | No       |
| `price`      | `number` | The price of the product.                   | Yes      |
| `category`   | `string` | The category the product belongs to.        | Yes      |
| `deepNestedData` | `object` | Complex nested data structure. Refer to `Product` model for details. | Yes |

<Note>
  `id`, `createdAt`, and `updatedAt` fields are automatically generated by the
  server and should not be included in the request body.
</Note>

##### Example Request

```json
{
  "name": "Gaming Keyboard RGB",
  "description": "High-performance mechanical gaming keyboard with RGB lighting.",
  "price": 129.99,
  "category": "Peripherals",
  "deepNestedData": {
    "level2": {
      "level3": {
        "level4": {
          "level5": {
            "value": "initial_data",
            "timestamp": "2024-02-18T10:30:00.000Z",
            "metadata": {
              "source": "manual",
              "version": "1.0"
            }
          }
        }
      }
    }
  }
}
```

#### Response

##### Success Response (`201 Created`)

<ResponseExample status="201">
```json
{
  "id": "65d1d6e1c8a1b7001f3e7a8d",
  "name": "Gaming Keyboard RGB",
  "description": "High-performance mechanical gaming keyboard with RGB lighting.",
  "price": 129.99,
  "category": "Peripherals",
  "createdAt": "2024-02-18T11:00:00.000Z",
  "updatedAt": "2024-02-18T11:00:00.000Z",
  "deepNestedData": {
    "level2": {
      "level3": {
        "level4": {
          "level5": {
            "value": "initial_data",
            "timestamp": "2024-02-18T10:30:00.000Z",
            "metadata": {
              "source": "manual",
              "version": "1.0"
            }
          }
        }
      }
    }
  }
}
```
</ResponseExample>

##### Error Responses

<ErrorExample status="400">
```json
{
  "statusCode": 400,
  "message": [
    "name should not be empty",
    "price must be a positive number"
  ],
  "error": "Bad Request"
}
```
</ErrorExample>

<ErrorExample status="401">
```json
{
  "statusCode": 401,
  "message": "Unauthorized",
  "error": "Unauthorized"
}
```
</ErrorExample>

---

### Other Product Endpoints

*   **`GET /products`**: Retrieve a list of all products.
*   **`PATCH /products/:id`**: Update an existing product by ID.
    *   **Path Parameters**: `id` (string) - The unique ID of the product.
    *   **Request Body**: `UpdateProductDto` (partial `CreateProductDto`).
*   **`DELETE /products/:id`**: Remove a product by ID.
    *   **Path Parameters**: `id` (string) - The unique ID of the product.

### Project Analysis Endpoints

These endpoints are handled by the `AppController` and provide functionality related to project analysis.

*   **`GET /analyze`**: Triggers a new project analysis.
*   **`GET /analysis-results`**: Retrieves the results of the latest project analysis.
*   **`GET /`**: A basic health check or root endpoint, typically returning a simple message like "Hello World!".

## Data Models

### Product

Represents a product entity in the system.

| Field          | Type     | Description                                   | Required |
| :------------- | :------- | :-------------------------------------------- | :------- |
| `id`           | `string` | Unique identifier for the product.            | Yes      |
| `name`         | `string` | The name of the product.                      | Yes      |
| `description`  | `string` | A detailed description of the product.        | No       |
| `price`        | `number` | The price of the product.                     | Yes      |
| `category`     | `string` | The category the product belongs to.          | Yes      |
| `createdAt`    | `Date`   | Timestamp when the product was created.       | Yes      |
| `updatedAt`    | `Date`   | Timestamp when the product was last updated.  | Yes      |
| `deepNestedData` | `object` | A complex, deeply nested data structure.